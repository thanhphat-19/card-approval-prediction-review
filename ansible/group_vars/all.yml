# =============================================================================
# Global variables for all hosts
# =============================================================================


# GCP Configuration
gcp_project_id: "{{ lookup('env', 'GCP_PROJECT_ID') | mandatory }}"
gcp_region: "{{ lookup('env', 'GCP_REGION') | default('us-east1', true) }}"
gcp_zone: "{{ lookup('env', 'GCP_ZONE') | default('us-east1-b', true) }}"

# GKE Configuration (for Jenkins to deploy)
gke_cluster_name: "{{ lookup('env', 'GKE_CLUSTER_NAME') | default('card-approval-prediction-mlops-gke', true) }}"
gke_namespace: "{{ lookup('env', 'GKE_NAMESPACE') | default('card-approval', true) }}"

# Jenkins Configuration
jenkins_port: 8080
jenkins_admin_user: "{{ lookup('env', 'JENKINS_ADMIN_USER') | default('admin', true) }}"
jenkins_admin_password: "{{ lookup('env', 'JENKINS_ADMIN_PASSWORD') | mandatory }}"
jenkins_home: "/var/jenkins_home"

# Docker Registry (matches config.env)
docker_registry: "{{ lookup('env', 'DOCKER_REGISTRY') | default(gcp_region + '-docker.pkg.dev', true) }}"
docker_repository: "{{ lookup('env', 'DOCKER_REPOSITORY') | default(gcp_project_id + '/product-recsys-mlops-recsys', true) }}"
image_name: "{{ lookup('env', 'IMAGE_NAME') | default('card-approval-api', true) }}"

# SonarQube Configuration
sonarqube_url: "http://localhost:9000"
sonarqube_jdbc_username: "{{ lookup('env', 'SONARQUBE_JDBC_USERNAME') | default('sonar', true) }}"
sonarqube_jdbc_password: "{{ lookup('env', 'SONARQUBE_JDBC_PASSWORD') | mandatory }}"

# GitHub Configuration
github_repo_owner: "{{ lookup('env', 'GITHUB_REPO_OWNER') | mandatory }}"
github_repo_name: "{{ lookup('env', 'GITHUB_REPO_NAME') | default('card-approval-prediction', true) }}"
github_repo: "https://github.com/{{ github_repo_owner }}/{{ github_repo_name }}"
github_branch: "{{ lookup('env', 'GITHUB_BRANCH') | default('main', true) }}"
github_token: "{{ lookup('env', 'GITHUB_TOKEN') | mandatory }}"

# GCP Service Account
gcp_service_account: "{{ lookup('env', 'GCP_MLFLOW_SERVICE_ACCOUNT') | default('mlflow-gcs@' + gcp_project_id + '.iam.gserviceaccount.com', true) }}"
gcp_key_path: "{{ lookup('env', 'GCP_KEY_PATH') | mandatory }}"
